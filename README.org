#+TITLE:My Setup
- [[https://pixabay.com/vectors/mountains-panorama-forest-mountain-1412683/?download][Wallpaper]]
- [[file:Emacs.org::+TITLE:Emacs Configuration][Emacs]]
- [[https://github.com/hyprwm/Hyprland][Hyprland]]
- [[https://guix.gnu.org/][GNU Guix System]]
- Desktop shell: [[https://github.com/caelestia-dots/shell][Caelestia]] (Quickshell)
- PipeWire, Easy Effects
- File Manager: Gnome Files, Dired (Emacs)
- PDF Viewer: pdf-tools (Emacs)
- Theme: ef-melissa-dark
- Cursor theme: Bibata-Modern-Amber

* Table Of Contents :TOC:
- [[#setup][Setup]]
  - [[#clone--bootstrap][Clone & Bootstrap]]
  - [[#system-reconfigure][System Reconfigure]]
  - [[#home-reconfigure][Home Reconfigure]]
  - [[#what-gets-automated][What Gets Automated]]
- [[#keyboard][Keyboard]]
- [[#caelestia-shell][Caelestia Shell]]
  - [[#ipc-commands][IPC Commands]]
- [[#spicetify][Spicetify]]
- [[#slack][Slack]]
- [[#emacs][Emacs]]
- [[#eca][ECA]]
- [[#references][References]]

* Setup

  [[https://guix.gnu.org/][GNU Guix System]] with Hyprland (Wayland) on NVIDIA (RTX 3070 Ti). Home environment at =home/redfish.scm= — dotfiles are deployed via =guix home reconfigure=.

** Clone & Bootstrap

#+begin_src sh :tangle no
cd ~
git clone https://github.com/snehrbass/dotfiles.git .dotfiles --recurse-submodules
cd .dotfiles
guix pull -C channels.scm
#+end_src

** System Reconfigure

#+begin_src sh :tangle no
sudo guix system reconfigure systems/redfish.scm
#+end_src

** Home Reconfigure

#+begin_src sh :tangle no
guix home reconfigure home/redfish.scm -L .
#+end_src

** What Gets Automated

   On =guix home reconfigure=, the activation service handles:
   - Flatpak: adds Flathub remote, installs Zen Browser / Spotify / Slack
   - Caelestia shell: clones QML config to =~/.config/quickshell/caelestia=

* Keyboard

[[images/keyboard.jpg]]

  - [[Https://boardsource.xyz/store/5ecc0f81eee64242946c988f][CorneV3]]
  - [[https://github.com/manna-harbour/miryoku][Layout]]

* Caelestia Shell

  Desktop shell built on [[https://quickshell.outfoxxed.me][Quickshell]]. Provides bar, dashboard, app launcher, session/lock screen, notifications, OSD, and media controls — all as Wayland layer surfaces.

** IPC Commands

   All commands use the form =qs -c caelestia ipc call <target> <function> [args...]=.

*** Drawers

    Toggle UI panels on/off.

    | Command                                                          | Description         |
    |------------------------------------------------------------------+---------------------|
    | =qs -c caelestia ipc call drawers toggle bar=                    | Toggle status bar   |
    | =qs -c caelestia ipc call drawers toggle dashboard=              | Toggle dashboard    |
    | =qs -c caelestia ipc call drawers toggle launcher=               | Toggle app launcher |
    | =qs -c caelestia ipc call drawers toggle session=                | Toggle session menu |
    | =qs -c caelestia ipc call drawers toggle utilities=              | Toggle utilities    |
    | =qs -c caelestia ipc call drawers toggle sidebar=                | Toggle sidebar      |
    | =qs -c caelestia ipc call drawers toggle osd=                    | Toggle OSD          |
    | =qs -c caelestia ipc call drawers list=                          | List all drawers    |

*** Lock

    | Command                                              | Description       |
    |------------------------------------------------------+-------------------|
    | =qs -c caelestia ipc call lock lock=                 | Lock the screen   |
    | =qs -c caelestia ipc call lock unlock=               | Unlock the screen |
    | =qs -c caelestia ipc call lock isLocked=             | Check lock state  |

*** Media (mpris)

    | Command                                                          | Description            |
    |------------------------------------------------------------------+------------------------|
    | =qs -c caelestia ipc call mpris playPause=                       | Toggle play/pause      |
    | =qs -c caelestia ipc call mpris play=                            | Play                   |
    | =qs -c caelestia ipc call mpris pause=                           | Pause                  |
    | =qs -c caelestia ipc call mpris next=                            | Next track             |
    | =qs -c caelestia ipc call mpris previous=                        | Previous track         |
    | =qs -c caelestia ipc call mpris stop=                            | Stop                   |
    | =qs -c caelestia ipc call mpris list=                            | List players           |
    | =qs -c caelestia ipc call mpris getActive <prop>=                | Get active player prop |

*** Wallpaper

    | Command                                                          | Description      |
    |------------------------------------------------------------------+------------------|
    | =qs -c caelestia ipc call wallpaper get=                         | Get current path |
    | =qs -c caelestia ipc call wallpaper list=                        | List available   |
    | =qs -c caelestia ipc call wallpaper set <path>=                  | Set wallpaper    |

*** Brightness

    | Command                                                                  | Description               |
    |--------------------------------------------------------------------------+---------------------------|
    | =qs -c caelestia ipc call brightness get=                                | Get brightness (0.0-1.0)  |
    | =qs -c caelestia ipc call brightness set <value>=                        | Set brightness            |
    | =qs -c caelestia ipc call brightness getFor <query>=                     | Get for specific display  |
    | =qs -c caelestia ipc call brightness setFor <query> <value>=             | Set for specific display  |

*** Notifications

    | Command                                                    | Description           |
    |------------------------------------------------------------+-----------------------|
    | =qs -c caelestia ipc call notifs toggleDnd=                | Toggle Do Not Disturb |
    | =qs -c caelestia ipc call notifs isDndEnabled=             | Check DND state       |
    | =qs -c caelestia ipc call notifs clear=                    | Clear notifications   |

*** Toaster

    | Command                                                                      | Description   |
    |------------------------------------------------------------------------------+---------------|
    | =qs -c caelestia ipc call toaster info <title> <msg> <icon>=                 | Info toast    |
    | =qs -c caelestia ipc call toaster warn <title> <msg> <icon>=                 | Warning toast |
    | =qs -c caelestia ipc call toaster error <title> <msg> <icon>=                | Error toast   |
    | =qs -c caelestia ipc call toaster success <title> <msg> <icon>=              | Success toast |

*** Other

    | Command                                                                      | Description              |
    |------------------------------------------------------------------------------+--------------------------|
    | =qs -c caelestia ipc call picker open=                                       | Open color picker        |
    | =qs -c caelestia ipc call controlCenter open=                                | Open control center      |
    | =qs -c caelestia ipc call idleInhibitor toggle=                              | Toggle idle inhibitor    |
    | =qs -c caelestia ipc call gameMode toggle=                                   | Toggle game mode         |
    | =qs -c caelestia ipc call hypr cycleSpecialWorkspace <direction>=            | Cycle special workspaces |
    | =qs -c caelestia ipc call hypr refreshDevices=                               | Refresh input devices    |

*** Shell Management

    | Command                              | Description          |
    |--------------------------------------+----------------------|
    | =qs -c caelestia -n -d=              | Start shell (daemon) |
    | =qs -c caelestia kill=               | Kill shell           |
    | =qs -c caelestia ipc show=           | Show all IPC targets |
    | =qs -c caelestia log=                | Show shell log       |

* Spicetify

#+begin_src sh :tangle no
spicetify config current_theme Onepunch color_scheme light
spicetify restore backup
spicetify backup
spicetify apply
#+end_src

* Slack

   Set the theme to dark and paste values.

   TODO: Update Gruvbox colors below to match ef-melissa-dark theme.

#+begin_src :tangle no
#3C3836,#1A0404,#3C3836,#D5C4A1,#665C54,#EBDBB2,#FB4934,#D5C4A1,#D5C4A1,#282828
#+end_src

* Emacs

   My Emacs config can be found [[file:files/emacs/Emacs.org][here]]. =emacs-next-pgtk= is installed via =redfish.scm= with pgtk and native-comp.

   Run =M-x package-upgrade-all= after first launch to finish installing packages.

* ECA

   [[https://eca.dev][ECA]] (Editor Code Assistant) is an AI-powered pair-programming client. It runs as an external server process and integrates with Emacs via the =emacs-eca= package (defined in =packages/emacs-eca.scm=).

   Config is at =files/eca/config.json= → =~/.config/eca/config.json=.

** MCP Servers

   The following MCP (Model Context Protocol) servers are configured:

   | Server              | Command                                   | Description                        |
   |---------------------+-------------------------------------------+------------------------------------|
   | =duckduckgo-search= | =npx -y duckduckgo-mcp-server=            | Web search via DuckDuckGo          |
   | =fetch=             | =uvx mcp-server-fetch=                    | Fetch URLs / web content           |
   | =git=               | =uvx mcp-server-git=                      | Git operations                     |
   | =memory=            | =npx -y @modelcontextprotocol/server-memory= | Persistent memory / knowledge graph |
   | =gitlab=            | =glab mcp serve= (disabled)              | GitLab integration                 |

** Skills

   Custom skills are loaded from =~/.claude/skills= (symlinked from =files/claude-skills/=).

   | Skill   | Trigger                                                           | Description                                      |
   |---------+-------------------------------------------------------------------+--------------------------------------------------|
   | =guix=  | Guix home/system reconfigure, package definitions, channel updates | Guix workflow knowledge for this dotfiles project |

* References
- https://github.com/fufexan/dotfiles
- https://github.com/Axarva/dotfiles-2.0
- https://github.com/caelestia-dots/shell
